(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[1],{122:function(n,e,t){"use strict";t.r(e);var a=t(42),r=t.n(a),i=t(62),o=t(0),c=t.n(o),l=t(25),s=t.n(l),u=(t(98),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function d(n){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");u?(!function(n,e){fetch(n,{headers:{"Service-Worker":"script"}}).then((function(t){var a=t.headers.get("content-type");404===t.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(n){n.unregister().then((function(){window.location.reload()}))})):g(n,e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e,n),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):g(e,n)}))}}function g(n,e){navigator.serviceWorker.register(n).then((function(n){n.onupdatefound=function(){var t=n.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(n)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(n)))})}})).catch((function(n){console.error("Error during service worker registration:",n)}))}var m=t(33),f=t(49),p=t(133),h=t(136),k=t(144),E=t(21),v=t(145),y=t(86),b=t(139),S=function(n){var e=n.isLoggedIn,t=n.responsive,a=n.pending,r=n.setPending,i=Object(f.a)(),o=function(n){n.preventDefault(),localStorage.removeItem("auth-token"),localStorage.removeItem("userId"),i.writeData({data:{isLoggedIn:!1,userId:null}})};return"small"===t?c.a.createElement(p.a,null,c.a.createElement(h.a,{alignSelf:"center",dropProps:{align:{top:"bottom",left:"left"}},icon:c.a.createElement(b.a,null),pad:"small",items:e?[{label:c.a.createElement(k.a,{background:{light:"light-2",dark:"dark-2"},checked:a,label:"Scheduled Events"}),onClick:function(){return r(!a)}},{label:"Logout",onClick:function(n){return o(n)}}]:[]})):c.a.createElement(p.a,null,e?c.a.createElement(c.a.Fragment,null,c.a.createElement(E.a,{pad:"medium",direction:"row",align:"center"},c.a.createElement(v.a,{level:"1",color:"brand",style:{userSelect:"none",fontFamily:"Playball"}},"Event Tool")),c.a.createElement(E.a,{direction:"row",gap:"small"},c.a.createElement(E.a,{gap:"small",margin:"medium",direction:"row"},c.a.createElement(y.a,{onClick:function(){r(!a)},style:{fontFamily:"Fira Sans",textDecoration:a?"underline":"none"}},"Created Events")),c.a.createElement(E.a,{gap:"small",margin:"medium",direction:"row"},c.a.createElement(y.a,{style:{fontFamily:"Fira Sans"},weight:"bold",plain:!0,label:"Logout",onClick:o})))):null)},I=t(140),w=t(143),$=t(141),O=t(79),j=t(51),_=c.a.lazy((function(){return Promise.all([t.e(0),t.e(5)]).then(t.bind(null,347))})),L=c.a.lazy((function(){return Promise.all([t.e(0),t.e(3),t.e(6)]).then(t.bind(null,346))})),C=j.a.IS_LOGGED_IN,U=Object(O.deepMerge)(I.a,{defaultMode:"dark",global:{font:{family:"Noto Sans"},colors:{brand:"#f05537","accent-1":"#73a580","accent-2":"#F48668","accent-3":"#c5c392","neutral-1":"#EEA960","neutral-2":"#3659e3","neutral-3":"#47AE6A",inactive:"#6f7287",focus:"none"}}});var A=function(n){var e=Object(o.useState)(!1),t=Object(m.a)(e,2),a=t[0],r=t[1],i=Object(o.useState)(!1),l=Object(m.a)(i,2),s=l[0],u=l[1];window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(function(n){u(!0)}));var d=Object(f.c)(C),g=d.data,p=d.error,h=d.loading;if(p)return c.a.createElement("p",null,p.message);if(h)return c.a.createElement("p",null,"Loading");var k=g.isLoggedIn;return c.a.createElement(w.a,{theme:U,themeMode:s?"dark":"light"},c.a.createElement($.a.Consumer,null,(function(e){return c.a.createElement(E.a,{height:{max:"100vh"},style:{transition:"0.25s ease-out"},background:{light:"light-3",dark:"dark-1"},overflow:"auto"},c.a.createElement(S,{responsive:e,pending:a,setPending:r,isLoggedIn:k}),c.a.createElement(E.a,Object.assign({tag:"main",direction:"column",align:"center",justify:"start"},n),k?c.a.createElement(o.Suspense,{fallback:c.a.createElement(E.a,{height:"100vh",background:{light:"light-3",dark:"dark-1"}},"Loading...")},c.a.createElement(L,{pending:a,responsive:e})):c.a.createElement(o.Suspense,{fallback:c.a.createElement(E.a,{height:"100vh",background:{light:"light-3",dark:"dark-1"}},"Loading...")},c.a.createElement(_,{responsive:e}))))})))},F=t(80),P=t.n(F),R=t(20),T=t(83),D=t(81),N=t(84),q=t(12),G=t(82),W=t(13),x=t(52).a.VERIFY_USER,z=new T.a({dataIdFromObject:function(n){return n._id||null}}),H=Object(G.a)((function(n){var e=n.graphQLErrors;e&&e.map((function(n){var e=n.message;return console.log(e)}))})),M=(window.location.hostname,Object(N.a)({uri:"/graphql",headers:{authorization:localStorage.getItem("auth-token")}})),B=function(){var n=Object(i.a)(r.a.mark((function n(){var e,t,a,i;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(D.persistCache)({cache:z,storage:window.localStorage,maxSize:"4mb"});case 2:e=new R.c({link:W.a.from([H,M]),cache:z,onError:function(n){var e=n.networkError,t=n.graphQLErrors;console.log("graphQLErrors",t),console.log("networkError",e)},resolvers:{}}),t=localStorage.getItem("auth-token"),a=localStorage.getItem("userId"),z.writeData({data:{isLoggedIn:Boolean(t),userId:a}}),t&&e.mutate({mutation:x,variables:{token:t}}).then((function(n){var e=n.data;z.writeData({data:{isLoggedIn:e.verifyUser.loggedIn,userId:e.verifyUser.id}})})),i=function(){return c.a.createElement(q.a,{client:e},c.a.createElement(A,null))},P.a.load({google:{families:["Playball","Fira Sans","Noto Sans"]}}),s.a.render(c.a.createElement(i,null),document.getElementById("root")),d();case 11:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();document.addEventListener("DOMContentLoaded",(function(n){B()}))},51:function(n,e,t){"use strict";var a=t(14),r=t(15),i=t.n(r);function o(){var n=Object(a.a)(["\n    query fetchCategories($apikey: String!) {\n      categories(apikey: $apikey) {\n        name\n        id\n      }\n      subcategories(apikey: $apikey) {\n        name\n        id\n        parent\n      }\n      types(apikey: $apikey) {\n        name\n        id\n      }\n      account(apikey: $apikey) {\n        name\n        organizations {\n          id\n          name\n        }\n      }\n    }\n  "]);return o=function(){return n},n}function c(){var n=Object(a.a)(["\n    query fetchVenues($apikey: String!, $orgId: String) {\n      venues(apikey: $apikey, orgId: $orgId) {\n        name\n        id\n      }\n    }\n  "]);return c=function(){return n},n}function l(){var n=Object(a.a)(["\n    query fetchAccount($apikey: String!) {\n      account(apikey: $apikey) {\n        id\n        first_name\n        last_name\n        apikey\n        name\n        email\n        is_public\n        image_id\n        organizations {\n          id\n          name\n        }\n      }\n    }\n  "]);return l=function(){return n},n}function s(){var n=Object(a.a)(["\n    query fetchAccounts($apikeys: [String!]) {\n      accounts(apikeys: $apikeys) {\n        id\n        first_name\n        last_name\n        apikey\n        name\n        email\n        is_public\n        image_id\n        organizations {\n          id\n          name\n        }\n      }\n    }\n  "]);return s=function(){return n},n}function u(){var n=Object(a.a)(["\n    query fetchUser($userId: ID!) {\n      user(id: $userId) {\n        id\n        email\n        apikeys\n        jobs {\n          data\n          status\n          schedule\n          urls\n        }\n      }\n    }\n  "]);return u=function(){return n},n}function d(){var n=Object(a.a)(["\n    query fetchUserId {\n      userId @client\n    }\n  "]);return d=function(){return n},n}function g(){var n=Object(a.a)(["\n    query IsUserLoggedIn {\n      isLoggedIn @client\n    }\n  "]);return g=function(){return n},n}e.a={IS_LOGGED_IN:i()(g()),FETCH_USER_ID:i()(d()),FETCH_USER:i()(u()),FETCH_ACCOUNTS:i()(s()),FETCH_ACCOUNT:i()(l()),FETCH_VENUES:i()(c()),FETCH_CATEGORIES_AND_SUBCATEGORIES_AND_TYPES:i()(o())}},52:function(n,e,t){"use strict";var a=t(14),r=t(15),i=t.n(r);function o(){var n=Object(a.a)(["\n    mutation submitForm(\n      $id: ID!\n      $date: String!\n      $data: String!\n      $key: String!\n    ) {\n      scheduleEvent(id: $id, date: $date, data: $data, key: $key) {\n        id\n        email\n        apikeys\n        jobs {\n          data\n          status\n          schedule\n          urls\n        }\n      }\n    }\n  "]);return o=function(){return n},n}function c(){var n=Object(a.a)(["\n    mutation deleteAPIkey($id: ID!, $apikey: String!) {\n      deleteAPIkey(id: $id, apikey: $apikey) {\n        id\n        email\n        apikeys\n        jobs {\n          data\n          status\n          schedule\n        }\n      }\n    }\n  "]);return c=function(){return n},n}function l(){var n=Object(a.a)(["\n    mutation pushAPIkey($id: ID!, $apikey: String!) {\n      pushAPIkey(id: $id, apikey: $apikey) {\n        id\n        email\n        apikeys\n        jobs {\n          data\n          status\n          schedule\n        }\n      }\n    }\n  "]);return l=function(){return n},n}function s(){var n=Object(a.a)(["\n    mutation VerifyUser($token: String!) {\n      verifyUser(token: $token) {\n        id\n        loggedIn\n      }\n    }\n  "]);return s=function(){return n},n}function u(){var n=Object(a.a)(["\n    mutation RegisterUser($email: String!, $password: String!) {\n      register(email: $email, password: $password) {\n        id\n        token\n        loggedIn\n      }\n    }\n  "]);return u=function(){return n},n}function d(){var n=Object(a.a)(["\n    mutation LoginUser($email: String!, $password: String!) {\n      login(email: $email, password: $password) {\n        id\n        token\n        loggedIn\n      }\n    }\n  "]);return d=function(){return n},n}e.a={LOGIN_USER:i()(d()),REGISTER_USER:i()(u()),VERIFY_USER:i()(s()),PUSH_API_KEY:i()(l()),DELETE_API_KEY:i()(c()),SUBMIT_FORM:i()(o())}},92:function(n,e,t){n.exports=t(122)},98:function(n,e,t){}},[[92,2,4]]]);
//# sourceMappingURL=main.c4725f5b.chunk.js.map