(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[2],{102:function(e,n,t){},127:function(e,n,t){"use strict";t.r(n);var a=t(47),r=t.n(a),i=t(67),o=t(0),c=t.n(o),l=t(33),u=t.n(l);t(102),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=t(28),d=t(57),m=t(140),g=t(143),E=t(26),f=t(150),p=t(131),k=t(54),y=t(146),h=function(e){var n=e.isLoggedIn,t=e.responsive,a=Object(d.a)(),r=function(e){e.preventDefault(),localStorage.removeItem("auth-token"),localStorage.removeItem("userId"),a.writeData({data:{isLoggedIn:!1,userId:null}})};return"small"===t?c.a.createElement(m.a,{height:"5vh"},c.a.createElement(g.a,{alignSelf:"center",dropProps:{align:{top:"bottom",left:"left"}},icon:c.a.createElement(y.a,null),pad:"small",items:n?[{label:c.a.createElement(s.b,{to:"/status"},"Status")},{label:"Logout",onClick:function(e){return r(e)}}]:[]})):c.a.createElement(m.a,{height:"10vh"},n?c.a.createElement(c.a.Fragment,null,c.a.createElement(E.a,{pad:"medium",direction:"row",align:"center"},c.a.createElement(s.b,{style:{textDecoration:"none"},to:"/"},c.a.createElement(f.a,{level:"1",color:"brand",style:{userSelect:"none",fontFamily:"Playball"}},"Event Tool"))),c.a.createElement(E.a,{direction:"row",gap:"small"},c.a.createElement(E.a,{gap:"small",margin:"medium",direction:"row"},c.a.createElement(s.b,{style:{textDecoration:"none"},to:"/status"},c.a.createElement(p.a,{color:"dark-1"},"Status"))),c.a.createElement(E.a,{gap:"small",margin:"medium",direction:"row"},c.a.createElement(k.a,{style:{fontFamily:"Fira Sans"},weight:"bold",plain:!0,label:"Logout",onClick:r})))):null)},v=t(147),I=t(149),b=t(148),$=t(85),S=t(58),_=c.a.lazy((function(){return Promise.all([t.e(0),t.e(1),t.e(7)]).then(t.bind(null,354))})),w=c.a.lazy((function(){return Promise.all([t.e(0),t.e(4),t.e(1),t.e(6)]).then(t.bind(null,353))})),O=S.a.IS_LOGGED_IN,j=Object($.deepMerge)(v.a,{defaultMode:"dark",global:{font:{family:"Noto Sans"},colors:{brand:"#f05537","accent-1":"#73a580","accent-2":"#F48668","accent-3":"#c5c392","neutral-1":"#EEA960","neutral-2":"#3659e3","neutral-3":"#47AE6A",inactive:"#6f7287",focus:"none"}}});var L=function(e){var n=Object(d.c)(O),t=n.data,a=n.error,r=n.loading;if(a)return c.a.createElement("p",null,a.message," Error in App component");if(r)return c.a.createElement("p",null,"Loading");var i=t.isLoggedIn;return c.a.createElement(I.a,{theme:j,themeMode:"light"},c.a.createElement(b.a.Consumer,null,(function(n){return c.a.createElement(E.a,{height:"100vh",style:{transition:"0.25s ease-out"},background:{light:"light-3",dark:"dark-1"}},c.a.createElement(h,{responsive:n,isLoggedIn:i}),c.a.createElement(E.a,Object.assign({tag:"main",direction:"column",align:"center",justify:"start"},e),i?c.a.createElement(o.Suspense,{fallback:c.a.createElement(E.a,{height:"100vh",background:{light:"light-3",dark:"dark-1"}},"Loading...")},c.a.createElement(w,{responsive:n})):c.a.createElement(o.Suspense,{fallback:c.a.createElement(E.a,{height:"100vh",background:{light:"light-3",dark:"dark-1"}},"Loading...")},c.a.createElement(_,{responsive:n}))))})))},D=t(86),U=t.n(D),C=t(24),T=t(89),A=t(87),F=t(90),P=t(15),R=t(88),N=t(16),G=t(59).a.VERIFY_USER,q=new T.a({dataIdFromObject:function(e){return e._id||null}}),H=Object(R.a)((function(e){var n=e.graphQLErrors,t=e.networkError;n&&n.forEach((function(e){var n=e.message,t=e.locations,a=e.path;return console.log("[GraphQL error]: Message: ".concat(n,", Location: ").concat(t,", Path: ").concat(a))})),t&&console.log("[Network error]: ".concat(t))})),K=(window.location.hostname,Object(F.a)({uri:"/graphql",headers:{authorization:localStorage.getItem("auth-token")}})),z=function(){var e=Object(i.a)(r.a.mark((function e(){var n,t,a,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(A.persistCache)({cache:q,storage:window.localStorage,maxSize:"4mb"});case 2:n=new C.c({link:N.a.from([H,K]),cache:q,onError:function(e){var n=e.networkError,t=e.graphQLErrors;console.log("graphQLErrors",t),console.log("networkError",n)},resolvers:{}}),t=localStorage.getItem("auth-token"),a=localStorage.getItem("userId"),q.writeData({data:{isLoggedIn:Boolean(t),userId:a}}),t&&n.mutate({mutation:G,variables:{token:t}}).then((function(e){var n=e.data;q.writeData({data:{isLoggedIn:n.verifyUser.loggedIn,userId:n.verifyUser.id}})})),i=function(){return c.a.createElement(P.a,{client:n},c.a.createElement(s.a,null,c.a.createElement(L,null)))},U.a.load({google:{families:["Playball","Fira Sans","Noto Sans"]}}),u.a.render(c.a.createElement(i,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();document.addEventListener("DOMContentLoaded",(function(e){z()}))},58:function(e,n,t){"use strict";var a=t(12),r=t(13),i=t.n(r);function o(){var e=Object(a.a)(["\n    query fetchCategories($apikey: String!) {\n      categories(apikey: $apikey) {\n        name\n        id\n      }\n      subcategories(apikey: $apikey) {\n        name\n        id\n        parent\n      }\n      types(apikey: $apikey) {\n        name\n        id\n      }\n      account(apikey: $apikey) {\n        name\n        organizations {\n          id\n          name\n        }\n      }\n    }\n  "]);return o=function(){return e},e}function c(){var e=Object(a.a)(["\n    query fetchVenues($apikey: String!, $orgId: String) {\n      venues(apikey: $apikey, orgId: $orgId) {\n        name\n        id\n      }\n    }\n  "]);return c=function(){return e},e}function l(){var e=Object(a.a)(["\n    query fetchAccount($apikey: String!) {\n      account(apikey: $apikey) {\n        id\n        first_name\n        last_name\n        apikey\n        name\n        email\n        is_public\n        image_id\n        organizations {\n          id\n          name\n        }\n      }\n    }\n  "]);return l=function(){return e},e}function u(){var e=Object(a.a)(["\n    query fetchAccounts($apikeys: [String!]) {\n      accounts(apikeys: $apikeys) {\n        id\n        first_name\n        last_name\n        apikey\n        name\n        email\n        is_public\n        image_id\n        organizations {\n          id\n          name\n        }\n      }\n    }\n  "]);return u=function(){return e},e}function s(){var e=Object(a.a)(["\n    query fetchUser($userId: ID!) {\n      user(id: $userId) {\n        id\n        email\n        apikeys\n        selectedKey\n        jobs {\n          id\n          data\n          status\n          schedule\n          urls\n          eventbriteIds\n          locked\n        }\n      }\n    }\n  "]);return s=function(){return e},e}function d(){var e=Object(a.a)(["\n    query fetchUserId {\n      userId @client\n    }\n  "]);return d=function(){return e},e}function m(){var e=Object(a.a)(["\n    query IsUserLoggedIn {\n      isLoggedIn @client\n    }\n  "]);return m=function(){return e},e}n.a={IS_LOGGED_IN:i()(m()),FETCH_USER_ID:i()(d()),FETCH_USER:i()(s()),FETCH_ACCOUNTS:i()(u()),FETCH_ACCOUNT:i()(l()),FETCH_VENUES:i()(c()),FETCH_CATEGORIES_AND_SUBCATEGORIES_AND_TYPES:i()(o())}},59:function(e,n,t){"use strict";var a=t(12),r=t(13),i=t.n(r);function o(){var e=Object(a.a)(["\n    mutation submitForm(\n      $id: ID!\n      $date: String!\n      $data: String!\n      $key: String!\n    ) {\n      scheduleEvent(id: $id, date: $date, data: $data, key: $key) {\n        id\n        email\n        apikeys\n        jobs {\n          data\n          status\n          schedule\n          urls\n          locked\n        }\n      }\n    }\n  "]);return o=function(){return e},e}function c(){var e=Object(a.a)(["\n    mutation selectkey($key: String!, $userId: ID!) {\n      selectKey(key: $key, userId: $userId){\n        id,\n        selectedKey\n        apikeys\n      }\n    }\n  "]);return c=function(){return e},e}function l(){var e=Object(a.a)(["\n    mutation deleteAPIkey($id: ID!, $apikey: String!) {\n      deleteAPIkey(id: $id, apikey: $apikey) {\n        id\n        email\n        apikeys\n        selectedKey\n        jobs {\n          data\n          status\n          schedule\n        }\n      }\n    }\n  "]);return l=function(){return e},e}function u(){var e=Object(a.a)(["\n    mutation deleteEvent($id: ID!){\n      deleteEvent(id: $id){\n        id\n      }\n    }\n  "]);return u=function(){return e},e}function s(){var e=Object(a.a)(["\n    mutation pushAPIkey($id: ID!, $apikey: String!) {\n      pushAPIkey(id: $id, apikey: $apikey) {\n        id\n        email\n        apikeys\n        selectedKey\n        jobs {\n          data\n          status\n          schedule\n        }\n      }\n    }\n  "]);return s=function(){return e},e}function d(){var e=Object(a.a)(["\n    mutation VerifyUser($token: String!) {\n      verifyUser(token: $token) {\n        id\n        loggedIn\n      }\n    }\n  "]);return d=function(){return e},e}function m(){var e=Object(a.a)(["\n  mutation publishEvent($id: ID!, $eventids: [ID!], $key: ID!, $dateStr: String!, $interval: Int) {\n    publishEvent(id: $id, eventids: $eventids, key: $key, dateStr: $dateStr, interval: $interval) {\n      status\n      locked\n    }\n  }\n"]);return m=function(){return e},e}function g(){var e=Object(a.a)(["\n    mutation RegisterUser($email: String!, $password: String!) {\n      register(email: $email, password: $password) {\n        id\n        token\n        loggedIn\n      }\n    }\n  "]);return g=function(){return e},e}function E(){var e=Object(a.a)(["\n    mutation LoginUser($email: String!, $password: String!) {\n      login(email: $email, password: $password) {\n        id\n        token\n        loggedIn\n      }\n    }\n  "]);return E=function(){return e},e}n.a={LOGIN_USER:i()(E()),REGISTER_USER:i()(g()),PUBLISH_EVENT:i()(m()),VERIFY_USER:i()(d()),PUSH_API_KEY:i()(s()),DELETE_EVENT:i()(u()),DELETE_API_KEY:i()(l()),SELECT_KEY:i()(c()),SUBMIT_FORM:i()(o())}},96:function(e,n,t){e.exports=t(127)}},[[96,3,5]]]);
//# sourceMappingURL=main.a74b6495.chunk.js.map