(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[6],{353:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(9),c=t(153),i=t(57),o=t(58),s=t(59),u=t(26),m=t(128),d=t(358),E=t(131),g=t(54),b=t(337),p=t(338),f=t(363),h=t(150),v=t(339),y=t(340),k=t(341),j=t(336),O=o.a.FETCH_USER,S=s.a.PUBLISH_EVENT,C=s.a.DELETE_EVENT,w=function(e){var a=e.date,t=e.setDate,l=e.confirmed,i=e.setConfirmed,o=e.locked,s=Object(n.useState)(),b=Object(c.a)(s,2),p=b[0],f=b[1],h=new Date,v=h.getFullYear(),y=h.getDate(),k=h.getMonth(),O=[h.toISOString(),new Date(v+5,k,y).toISOString()];return r.a.createElement(u.a,{direction:"row"},r.a.createElement(m.a,{open:!l&&p,onClose:function(){return f(!1)},onOpen:function(){return f(!0)},dropContent:r.a.createElement(d.a,{bounds:O,date:a,onSelect:function(e){t(e),f(!1)}}),disabled:l||o},r.a.createElement(u.a,{direction:"row",gap:"medium",align:"center",pad:"small"},r.a.createElement(E.a,null,a?new Date(a).toLocaleDateString():"Select date to publish event"),r.a.createElement(j.a,{color:"brand"}))),a?r.a.createElement(g.a,{primary:!0,color:l?"accent-1 ":"accent-2",label:l?"change":"confirm",onClick:function(){i(!l)}}):null)},z=function(e){var a=e.user,t=e.job,l=e.index,o=e.setErr,s=Object(n.useState)(),m=Object(c.a)(s,2),d=m[0],h=m[1],v=Object(n.useState)(!1),y=Object(c.a)(v,2),k=y[0],j=y[1],z=Object(i.b)(S,{errorPolicy:"all",refetchQueries:[{query:O,variables:{userId:a.id}}],onError:function(e){var a=e.graphQLErrors,t=e.networkError,n=[];a&&(n=n.concat(a.map((function(e,a){return r.a.createElement(E.a,{key:a},e.message)})))),t&&(n=n.concat([r.a.createElement(E.a,{color:"Red",key:99},t.message)])),console.log(n),o(n)},onCompleted:function(){o([r.a.createElement(E.a,{key:98,color:"green"},"Success")])}}),_=Object(c.a)(z,1)[0],T=Object(i.b)(C,{errorPolicy:"all",refetchQueries:[{query:O,variables:{userId:a.id}}],onError:function(e){var a=e.graphQLErrors,t=e.networkError,n=[];a&&(n=n.concat(a.map((function(e,a){return r.a.createElement(E.a,{key:a},e.message)})))),t&&(n=n.concat([r.a.createElement(E.a,{color:"Red",key:99},t.message)])),console.log(n),o(n)},onCompleted:function(){o([r.a.createElement(E.a,{key:98,color:"green"},"Success")])}}),D=Object(c.a)(T,1)[0];return r.a.createElement(b.a,{key:l},r.a.createElement(p.a,null,t.data.title),r.a.createElement(p.a,null,r.a.createElement(u.a,null,t.data.locations.map((function(e,a){return r.a.createElement(f.a,{target:"_blank",href:t.urls[a],key:a},e.City)})))),r.a.createElement(p.a,null,r.a.createElement(w,{locked:t.locked,date:d,setDate:h,confirmed:k,setConfirmed:j})),r.a.createElement(p.a,null,r.a.createElement(E.a,null,t.status)),r.a.createElement(p.a,null,r.a.createElement(u.a,{direction:"row"},r.a.createElement(g.a,{disabled:!d||!k||t.locked,type:"button",size:"small",label:"Schedule",onClick:function(e){!function(e,a){e.preventDefault(),_({variables:{id:a.id,eventids:a.eventbriteIds,key:a.key,dateStr:d,interval:5}})}(e,t)}}),r.a.createElement(g.a,{onClick:function(e){return function(e,a){e.preventDefault(console.log(a)),D({variables:{id:a.id,apikey:a.key}})}(e,t)},size:"small",label:"Delete"}))))},_=function(e){var a=e.user,t=Object(n.useState)([]),l=Object(c.a)(t,2),i=l[0],o=l[1],s=a.jobs;return s=s.map((function(e){return{id:e.id,created:new Date(e.schedule),data:JSON.parse(e.data),eventbriteIds:e.eventbriteIds,urls:e.urls,status:e.status,key:a.apikeys[0],locked:e.locked}})),r.a.createElement(u.a,{pad:"medium",align:"center",width:"100vw"},r.a.createElement(h.a,{level:"3"},"Created Events"),i,r.a.createElement(u.a,{pad:"large",width:"100%"},r.a.createElement(v.a,null,r.a.createElement(y.a,null,r.a.createElement(b.a,null,r.a.createElement(p.a,{scope:"col",border:"bottom"},r.a.createElement(E.a,null,"Title")),r.a.createElement(p.a,{scope:"col",border:"bottom"},r.a.createElement(E.a,null,"Location")),r.a.createElement(p.a,{scope:"col",border:"bottom"},r.a.createElement(E.a,null,"Date")),r.a.createElement(p.a,{scope:"col",border:"bottom"},r.a.createElement(E.a,null,"Status")),r.a.createElement(p.a,{scope:"col",border:"bottom"}))),r.a.createElement(k.a,null,s.map((function(e,t){return r.a.createElement(z,{job:e,user:a,key:t,setErr:o})}))))))},T=t(181),D=t(233),q=t(222),I=t.n(q),F=t(364),K=t(351),V=t(322),Y=t(179),x=t(185),A=t(342),L=t(356),M=t(357),P=t(343),H=t(344),R=s.a.PUSH_API_KEY,U=s.a.SELECT_KEY,N=o.a.FETCH_USER;function Q(e){var a=e.errors,t=Object.keys(a).map((function(e,t){return r.a.createElement(E.a,{size:"small",color:"red",key:t},"* ",e," - ",a[e])}));return Object.keys(a).length>0?r.a.createElement(u.a,{margin:{left:"large",right:"large",bottom:"small"},pad:"medium",border:{color:"red",size:"small"}},r.a.createElement(E.a,{size:"small",color:"red"},"This form has errors in the following fields:"),r.a.createElement(u.a,{margin:{left:"large"}},t)):null}var $=function(e){var a=e.id,t=e.open,l=Object(n.useState)(""),o=Object(c.a)(l,2),s=o[0],m=o[1],d=Object(n.useState)(null),b=Object(c.a)(d,2),p=b[0],f=b[1],h=Object(i.b)(R,{onError:function(e){var a=e.message.split(":")[1];f(r.a.createElement(E.a,{size:"small"},a)),setTimeout((function(){f(null)}),1e4)}}),v=Object(c.a)(h,1)[0],y=Object(i.b)(U,{onError:function(e){console.log(e.message)},update:function(e,t){var n=t.data.selectKey,r=e.readQuery({query:N,variables:{userId:a}});e.writeQuery({query:N,variables:{userId:a},data:{user:Object(T.a)(Object(T.a)({},r.user),{},{apikeys:[].concat(Object(Y.a)(r.user.apikeys),[n.selectedKey]),selectedKey:n.selectedKey})}})}}),k=Object(c.a)(y,1)[0];return r.a.createElement(A.a,{open:t||!1},r.a.createElement(u.a,{margin:"small"},r.a.createElement(L.a,{error:p,label:"API Key"},r.a.createElement(M.a,{onChange:function(e){m(e.target.value)},value:s,placeholder:"2HFXXX2G...."})),r.a.createElement(g.a,{type:"button",onClick:function(e){e.preventDefault(),v({variables:{id:a,apikey:s}}),k({variables:{userId:a,key:s}}),m("")},color:"neutral-2",label:"Submit"})))};var B=function(e){var a=e.user,t=e.selectedKey,l=e.isSubmitting,i=e.errors,o=e.resetForm,s=e.success,m=e.emptyAccount,d=Object(n.useState)(!0),b=Object(c.a)(d,2),p=b[0],f=b[1],v=Object(n.useState)(m||!1),y=Object(c.a)(v,2),k=y[0],j=y[1];return r.a.createElement(u.a,{pad:"medium",width:"100vw",justify:"between",flex:!0},r.a.createElement(h.a,{color:p?"brand":{dark:"light-1",light:"dark-1"},level:"3"},r.a.createElement(g.a,{plain:!0,onClick:function(){return f(!p)}},"Eventbrite Accounts")),r.a.createElement(u.a,{margin:{right:"small"},direction:"row",justify:"end"},r.a.createElement(u.a,{justify:"center"},r.a.createElement(u.a,{direction:"row",align:"center",gap:"small",label:"Account",as:"button",type:"button",border:{size:"small"},size:"medium",onClick:function(){return j(!k)}},k?r.a.createElement(P.a,{size:"small"}):r.a.createElement(H.a,{size:"small"}),r.a.createElement(E.a,{size:"small"},"Edit")))),r.a.createElement(A.a,{background:"purple",open:p},r.a.createElement(x.a,{resetForm:o,user:a,selectedKey:t}),r.a.createElement($,{id:a.id,open:k}),r.a.createElement(Q,{errors:i}),s?r.a.createElement(E.a,null,s):null,m?null:r.a.createElement(u.a,{align:"end"},r.a.createElement(u.a,{direction:"row",gap:"small"},r.a.createElement(g.a,{label:"Submit",type:"submit",primary:!0,size:"large",color:"brand",disabled:l})))))},G=t(186),J=t(355),W=t(180),X=t(157),Z=t(345),ee=t(346),ae=o.a.FETCH_CATEGORIES_AND_SUBCATEGORIES_AND_TYPES,te=o.a.FETCH_VENUES;function ne(e){var a=e.apikey,t=e.values,l=e.handleChange,o=e.setFieldValue,s=e.errors,m=Object(n.useState)(!0),d=Object(c.a)(m,2),b=d[0],p=d[1],f=Object(n.useState)([]),v=Object(c.a)(f,2),y=v[0],k=v[1],j=Object(n.useState)([]),O=Object(c.a)(j,2),S=O[0],C=O[1],w=Object(i.c)(ae,{variables:{apikey:a}}),z=w.loading,_=w.data,T=(_=void 0===_?{}:_).account,D=(T=void 0===T?{}:T).organizations,q=_.categories,I=_.subcategories,F=_.types,K=w.error;Object(n.useEffect)((function(){var e=!0;return e&&I&&k(I.filter((function(e){return e.parent===t.category.name})).map((function(e){return{name:e.name,id:e.id}}))),function(){e=!1}}),[I,t.category.name]),Object(n.useEffect)((function(){var e=!0;return e&&D&&o("organization",D[0]),function(){e=!1}}),[D,o]);var V=Object(i.c)(te,{variables:{apikey:a,orgId:t.organization.id}}),Y=V.load,x=V.data,L=(x=void 0===x?{}:x).venues,P=V.error;return Object(n.useEffect)((function(){var e=!0;return e&&L&&C(L.filter((function(e){return e.name&&e.id}))),function(){e=!1}}),[L]),z?r.a.createElement(u.a,{height:"100vh",justify:"center",align:"center"},r.a.createElement(W.c,null)):K||P?r.a.createElement(u.a,null,K.message):z||Y?r.a.createElement(u.a,{height:"100vh",justify:"center",align:"center"},r.a.createElement(W.c,null)):K?r.a.createElement(u.a,null,K.message):r.a.createElement(u.a,{pad:"medium",width:"100vw",justify:"between",flex:!0},r.a.createElement(g.a,{plain:!0,onClick:function(){return p(!b)}},r.a.createElement(h.a,{color:b?"neutral-2":{dark:"light-1",light:"dark-1"},level:"2"},b?"-":"+"," ",r.a.createElement(Z.a,{color:b?"neutral-2":{dark:"light-1",light:"dark-1"},size:"medium"})," ","Basic Info")),r.a.createElement(A.a,{open:b},r.a.createElement(u.a,{id:"basic",margin:"small"},r.a.createElement(X.a,{margin:"small",info:r.a.createElement(u.a,{align:"end"},r.a.createElement(E.a,{size:"small"},t.title.length," / 70")),error:s.title,label:"Event Title"},r.a.createElement(M.a,{name:"title",margin:"small",value:t.title,onChange:l,placeholder:"Be clear and descriptive"})),r.a.createElement(u.a,{margin:"small",gap:"small",direction:"row"},r.a.createElement(X.a,{error:s.type,label:"Type"},r.a.createElement(J.a,{placeholder:"Type",value:t.type,labelKey:"name",valueKey:{key:"id"},onChange:function(e){var a=e.option;return o("type",a)},options:F})),r.a.createElement(X.a,{error:s.category,label:"Category"},r.a.createElement(J.a,{placeholder:"Music",labelKey:"name",valueKey:{key:"id"},value:t.category,onChange:function(e){var a=e.option;return o("category",a)},options:q})),I.length>1?r.a.createElement(X.a,{error:s.subcategory,label:"Subcategory"},r.a.createElement(J.a,{value:t.subcategory,labelKey:"name",valueKey:{key:"id"},onChange:function(e){var a=e.option;return o("subcategory",a)},options:y})):null),r.a.createElement(X.a,{label:"Organizer",margin:"small"},r.a.createElement(J.a,{labelKey:"name",valueKey:{key:"id"},value:t.organization,options:D,onChange:function(e){var a=e.option;return o("organization",a)}}))),r.a.createElement(h.a,{level:"2"},r.a.createElement(ee.a,null)," Locations"),r.a.createElement(u.a,{margin:"small"},r.a.createElement(X.a,{label:"Venue",margin:"small"},r.a.createElement(J.a,{multiple:!1,value:t.locationType||"",placeholder:"Venue",options:["Venue","Online Event","To Be Announced"],onChange:function(e){var a=e.option;return o("locationType",a)}})),"Venue"===t.locationType&&L?r.a.createElement(G.a,{apikey:a,venues:S,label:"Location",margin:"small",error:s.locations,values:t,setFieldValue:o}):null)))}var re=t(182),le=t(361),ce=t(347);function ie(e){var a=e.values,t=e.handleChange,l=e.setFieldValue,i=(e.apikey,e.screenSize),o=e.errors,s=Object(re.a)(e,["values","handleChange","setFieldValue","apikey","screenSize","errors"]),m=Object(n.useState)(!1),b=Object(c.a)(m,2),p=b[0],f=b[1],v=new Date,y=v.getFullYear(),k=v.getDate(),j=v.getMonth(),O=[new Date(y,j,k+2).toISOString(),new Date(y+5,j,k).toISOString()],S=function(e){if("string"===typeof e){var a=new Date(e),t=I()(a).format("YYYY-MM-DD");l("start_date",t),l("end_date","")}if("object"===typeof e){var n=I()(e[0][0]).format("YYYY-MM-DD"),r=I()(e[0][1]).format("YYYY-MM-DD");l("start_date",n),l("end_date",r)}},C=function(e,a){"start"===a&&l("start_time",e.target.value),"end"===a&&l("end_time",e.target.value)};return r.a.createElement(u.a,{pad:"medium",width:"100vw",fill:!0},r.a.createElement(g.a,{plain:!0,onClick:function(){return f(!p)}},r.a.createElement(h.a,{color:p?"neutral-2":{dark:"light-1",light:"dark-1"},level:"2"},p?"-":"+"," ",r.a.createElement(ce.a,{size:"medium",color:p?"neutral-2":{dark:"light-1",light:"dark-1"}})," ","Schedule")),r.a.createElement(A.a,{open:p},r.a.createElement(W.a,{pad:!0,help:r.a.createElement(u.a,{id:"schedule",pad:"medium",margin:"small",background:{light:"light-4",dark:"dark-4"}},r.a.createElement(le.a,Object.assign({name:"single",label:r.a.createElement(u.a,{margin:"xxsmall"},r.a.createElement(E.a,{size:"small"},r.a.createElement(E.a,{size:"small",weight:"bold"},"Single occurrence")," ","- happens once and can last multiple days")),checked:!a.series,onChange:function(){return l("series",!1)}},s)),r.a.createElement(le.a,Object.assign({label:r.a.createElement(u.a,{margin:"xxsmall"},r.a.createElement(E.a,{size:"small"},r.a.createElement(E.a,{size:"small",weight:"bold"},"Recurring events")," ","- repeats or occurs more than once")),name:"series",checked:a.series,onChange:function(){return l("series",!0)}},s))," ")},a.series?r.a.createElement(u.a,{id:"schedule",justify:"center",margin:"small",direction:"small"===i?"column":"row"},r.a.createElement(W.a,{label:"Select an event date",error:o.start_date},r.a.createElement(d.a,{onSelect:S,bounds:O,size:"medium",range:!0})),r.a.createElement(u.a,{pad:"small",justify:"center"},r.a.createElement(W.d,{error:o.start_time,label:"Start Time:",value:a.start_time,onChange:function(e){return C(e,"start")},required:!0}),r.a.createElement(W.d,{error:o.end_time,label:"End Time:",value:a.end_time,onChange:function(e){return C(e,"end")},required:!0}),r.a.createElement(W.a,{label:"Occurs:"},r.a.createElement(J.a,{value:a.occurs,options:["Daily","Weekly","Monthly"],onChange:function(e){var a=e.option;return l("occurs",a)}})),r.a.createElement(W.a,{info:"Event repeats "+a.times+(a.times>1?" times.":" time.")},r.a.createElement(M.a,{id:"times",value:a.times,onChange:t})))):r.a.createElement(u.a,{justify:"around",margin:"small",direction:"small"===i?"column":"row"},r.a.createElement(W.a,{label:"Select an event date",error:o.start_date},r.a.createElement(d.a,{bounds:O,size:"medium",onSelect:S,range:!0})),r.a.createElement(u.a,{pad:"small",justify:"center"},r.a.createElement(W.d,{error:o.start_time,label:"Start Time:",value:a.start_time,onChange:function(e){return C(e,"start")},required:!0}),r.a.createElement(W.d,{error:o.end_time,label:"End Time:",value:a.end_time,onChange:function(e){return C(e,"end")},required:!0}))))))}var oe=t(246),se=t.n(oe),ue=t(348),me=(t(320),function(e){var a=e.values,t=e.setFieldValue,l=(e.handleChange,e.errors),i=Object(n.useState)(!1),o=Object(c.a)(i,2),s=o[0],m=o[1];return r.a.createElement(u.a,{pad:"medium",width:"100vw"},r.a.createElement(g.a,{plain:!0,onClick:function(){return m(!s)}},r.a.createElement(h.a,{color:s?"neutral-2":{dark:"light-1",light:"dark-1"},level:"2"},s?"-":"+"," ",r.a.createElement(ue.a,{color:s?"neutral-2":{dark:"light-1",light:"dark-1"},size:"medium"})," ","Event Description")),r.a.createElement(A.a,{open:s},r.a.createElement(u.a,{margin:"small"},r.a.createElement(X.a,{label:"Description",errors:l.description},r.a.createElement(se.a,{style:{height:"40em"},valid:!l.description,theme:"snow",placeholder:"format your description however you like, including large text etc",value:a.description,onChange:function(e){return t("description",e)}})))))}),de=t(362),Ee=t(352),ge=t(349),be=t(350),pe=t(331),fe=function(e){var a=e.screenSize,t=e.values,l=e.setFieldValue,i=Object(n.useState)("paid"),o=Object(c.a)(i,2),s=o[0],m=o[1],d=Object(n.useState)(!1),b=Object(c.a)(d,2),p=b[0],f=b[1],v=Object(n.useState)({name:"General Admission",quantity:100,price:"$0.00",num:0}),y=Object(c.a)(v,2),k=y[0],j=y[1];return r.a.createElement(u.a,{pad:"medium",width:"100vw"},r.a.createElement(g.a,{plain:!0,onClick:function(){return f(!p)}},r.a.createElement(h.a,{color:p?"neutral-2":{dark:"light-1",light:"dark-1"},level:"2"},p?"-":"+"," ",r.a.createElement(ge.a,{color:p?"neutral-2":{dark:"light-1",light:"dark-1"},size:"medium"})," ","Tickets")),r.a.createElement(A.a,{open:p},r.a.createElement(u.a,{gap:"medium",justify:"center",direction:"small"===a?"column":"row"},r.a.createElement(u.a,{pad:"small",width:"small"===a?"100%":"50%"},r.a.createElement(u.a,{gap:"medium",justify:"center",pad:"small",direction:"row"},r.a.createElement(u.a,{focusIndicator:!1,as:"button",pad:"medium",border:"paid"===s?{size:"small",color:"brand"}:{size:"small"},background:{light:"light-2",dark:"dark-1"},style:"paid"===s?{userSelect:"none",background:"rgba(240, 85, 55, 0.2)"}:{userSelect:"none"},onClick:function(){return m("paid")}},r.a.createElement(E.a,null,"Paid")),r.a.createElement(u.a,{focusIndicator:!1,as:"button",border:"free"===s?{size:"small",color:"brand"}:{size:"small"},onClick:function(){j(Object(T.a)(Object(T.a)({},k),{},{price:"$0.00"})),m("free")},background:{light:"light-2",dark:"dark-1"},style:"free"===s?{userSelect:"none",background:"rgba(240, 85, 55, 0.2)"}:{userSelect:"none"},pad:"medium"},r.a.createElement(E.a,null,"Free"))),r.a.createElement(X.a,{label:"Name",required:!0},r.a.createElement(M.a,{value:"General Admission"===k.name?"":k.name,placeholder:k.name,onChange:function(e){return j(Object(T.a)(Object(T.a)({},k),{},{name:e.target.value}))}})),r.a.createElement(X.a,{label:"Quantity",required:!0},r.a.createElement(de.a,{value:k.quantity,mask:[{length:[1,6],regexp:/^([0-9]*[1-9][0-9]*(\.[0-9]+)?|[0]+\.[0-9]*[1-9][0-9]*)$/}],onChange:function(e){return j(Object(T.a)(Object(T.a)({},k),{},{quantity:e.target.value}))}})),r.a.createElement(X.a,{label:"Price",required:"paid"===s,disabled:"free"===s,style:{position:"relative"}},r.a.createElement(de.a,{icon:r.a.createElement(be.a,null),onBlur:function(){k.price.split(".").length<2&&j(Object(T.a)(Object(T.a)({},k),{},{price:k.price+".00"}))},mask:[{fixed:"$"},{length:[1,5],regexp:/^\d{1,5}$/},{fixed:"."},{length:[2],regexp:/^[0-9]/,placeholder:"00"}],placeholder:"$0.00"===k.price?"Free":null,value:"$0.00"===k.price?"":k.price,disabled:"free"===s,onChange:function(e){return j(Object(T.a)(Object(T.a)({},k),{},{price:e.target.value}))}})),r.a.createElement(u.a,{alignSelf:"center",width:"30%"},r.a.createElement(g.a,{primary:!0,onClick:function(e){j(Object(T.a)(Object(T.a)({},k),{},{num:k.num+1})),l("tickets",[].concat(Object(Y.a)(t.tickets),[k]))},size:"medium",label:"Create Ticket"}))),r.a.createElement(u.a,{pad:"small",width:"small"===a?"100%":"50%"},t.tickets.length>0?r.a.createElement(u.a,{width:"100%",align:"center"},r.a.createElement(Ee.a,{primaryKey:"num",columns:[{property:"name",header:r.a.createElement(E.a,null,"Name")},{property:"quantity",header:r.a.createElement(E.a,null,"Qty")},{property:"price",header:r.a.createElement(E.a,null,"Price"),render:function(e){return"$0.00"===e.price?"Free":e.price}},{property:"num",render:function(e){return r.a.createElement(u.a,{round:"full",overflow:"hidden"},r.a.createElement(g.a,{size:"small",hoverIndicator:"accent-1",onClick:function(){l("tickets",t.tickets.filter((function(a){return a.num!==e.num})))},icon:r.a.createElement(pe.a,null)}))}}],data:t.tickets})):r.a.createElement(u.a,{height:"100%",align:"center",justify:"center"},r.a.createElement(E.a,null,"Add Ticket"))))))},he={title:"",type:"",category:{id:"",name:""},subcategory:{id:"",name:""},organization:{id:"",name:""},locationType:"Venue",locations:[],series:!1,start_date:"",start_time:"",end_date:"",end_time:"",times:1,occurs:"Daily",summary:"",description:"",tickets:[]},ve={title:D.e().min(2,"too short").max(70,"Too Long").required("event title is required"),category:D.e().required("category selection is required"),organization:D.e().required("An organization selection is required"),subcategory:D.e().required("subcategory selection is required"),type:D.e().required("event type is required"),times:D.c().min(1,"Event must occur at least once"),start_date:D.b().required("must select at least one date"),start_time:D.e().required("select a event start time"),end_time:D.e().required("select a event end time"),description:D.e().required("please add a description"),tickets:D.a().required("please add a ticket")},ye=s.a.SUBMIT_FORM,ke=o.a.FETCH_USER;var je=function(e){var a=e.user,t=e.responsive,l=Object(n.useState)(!1),o=Object(c.a)(l,2),s=o[0],m=o[1],d=Object(n.useState)(0),b=Object(c.a)(d,2),p=b[0],f=b[1];Object(n.useEffect)((function(){var e=function(e){return f(window.scrollY)};return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}),[]);var v=D.d().shape(ve),y=a.selectedKey,k=Object(i.b)(ye,{onError:function(e){console.log(e)},update:function(e,t){var n=t.data.scheduleEvent;e.writeQuery({query:ke,variables:{userId:a.id},data:{user:Object(T.a)({},n)}})},onCompleted:function(){m(!0),setTimeout((function(){m(!1)}),3e3)}}),j=Object(c.a)(k,1)[0],O=new Date(Date.now()).toISOString(),S=I()(O).add(2,"minutes").toISOString();return a.apikeys&&a.apikeys.length>0?r.a.createElement(u.a,{background:"light-3"},r.a.createElement(V.b,{initialValues:he,validateOnChange:!1,validationSchema:v,onSubmit:function(e,t){var n=t.setSubmitting;console.log(e),j({variables:{id:a.id,date:S,data:JSON.stringify(e),key:y}}),n()}},(function(e){var n=e.values,l=e.errors,c=e.handleChange,i=e.handleSubmit,o=e.isSubmitting,m=e.setFieldValue;return r.a.createElement(V.a,{onSubmit:i},s?r.a.createElement(u.a,{pad:"small",border:{size:"small",color:"status-ok"}},r.a.createElement(E.a,{size:"small",color:"status-ok"},"Event Submitted Successfully")):null,r.a.createElement(B,{user:a,errors:l,selectedKey:y,isSubmitting:o}),r.a.createElement(ne,{values:n,setFieldValue:m,handleChange:c,apikey:y,errors:l}),r.a.createElement(ie,{values:n,setFieldValue:m,handleChange:c,screenSize:t,apikey:y,errors:l}),r.a.createElement(me,{values:n,setFieldValue:m,handleChange:c,apikey:y,errors:l}),r.a.createElement(fe,{values:n,setFieldValue:m,screenSize:t,errors:l}))})),p>100?r.a.createElement(u.a,{style:{position:"fixed",top:"95%",left:"95%"},direction:"row",justify:"end"},r.a.createElement(g.a,{color:"accent-3",plain:!0,icon:r.a.createElement(K.a,null),onClick:function(){setTimeout((function(){console.log("test"),window.scrollTo({top:0,behavior:"smooth"})}),200)}})):null):r.a.createElement(u.a,{border:{color:"brand",size:"medium"},pad:"medium",align:"center",margin:"large",justify:"center"},r.a.createElement(h.a,{style:{fontFamily:"Fira Sans",fontWeight:"900"},margin:"small"},"Welcome to Event Tool"),r.a.createElement(u.a,{margin:"medium",align:"start"},r.a.createElement(h.a,{margin:"small",level:"3"},"How to use this application:"),r.a.createElement(F.a,{margin:"small"},"In order to use this application you need to:"),r.a.createElement(u.a,{margin:{left:"large"}},r.a.createElement(F.a,null,"1. Login to an Eventbrite account"),r.a.createElement(F.a,null,"2. Go to Account Settings"),r.a.createElement(F.a,null,"3. Click the Developer Links Section"),r.a.createElement(F.a,null,"4. Click the create api key button and fill out the nessesary data"),r.a.createElement(F.a,null,'5. Copy the "Private Token" and paste into the eventbrite accounts form above'," "))),r.a.createElement(B,{user:a,errors:[],selectedKey:y,emptyAccount:!0}))},Oe=t(187),Se=o.a.FETCH_USER_ID,Ce=o.a.FETCH_USER;a.default=function(e){var a=e.responsive,t=Object(i.c)(Se),n=t.data.userId,c=t.error,o=t.loading,s=Object(i.c)(Ce,{fetchPolicy:"cache-and-network",variables:{userId:n}}),m=s.data,d=s.error,E=s.loading;if(c||d)return c?r.a.createElement("h3",null,"Error: ",c.message):r.a.createElement("h3",null,d.message);if(o||E)return r.a.createElement(u.a,{height:"100vh",justify:"center",align:"center"},r.a.createElement(Oe.a,null));var g=m.user,b=g.apikeys[0];return r.a.createElement(u.a,{direction:"row",justify:"start",align:"start",height:"90vh"},r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/status"},r.a.createElement(_,{user:g})),r.a.createElement(l.a,{path:"/"},r.a.createElement(je,{responsive:a,user:g,defaultKey:b}))))}}}]);
//# sourceMappingURL=6.7a069ec4.chunk.js.map